<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è SkillSearch - –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å.">
    <meta name="keywords" content="—Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è, –∞–∫–∫–∞—É–Ω—Ç, SkillSearch, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å">
    <title>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è | SkillSearch</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">SkillSearch</div>
            <nav>
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="forum.html">–§–æ—Ä—É–º</a>
            </nav>
            <!-- –ë–ª–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–ø—Ä–∞–≤–∞) -->
            <div class="user-header">
                <a href="profile.html" class="user-profile" aria-label="–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                    <div class="user-avatar">
                        <img id="headerAvatarImage" src="" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                        <div class="avatar-placeholder">üë§</div>
                    </div>
                    <span class="user-name" id="headerUserName">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </a>
            </div>
        </div>
    </header>

    <main>
        <section class="profile-section">
            <div class="container">
                <div class="profile-header">
                    <h1>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h1>
                </div>
                <div class="profile-content">
                    <article class="profile-settings">
                        <form id="changePasswordForm" aria-label="–§–æ—Ä–º–∞ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è">
                            <div class="form-group">
                                <label for="currentPassword">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="currentPassword" required autocomplete="current-password" aria-describedby="currentPasswordError">
                                <div id="currentPasswordError" class="error-message hidden"></div>
                            </div>
                            <div class="form-group">
                                <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="newPassword" required minlength="6" autocomplete="new-password" aria-describedby="newPasswordError">
                                <div id="newPasswordError" class="error-message hidden"></div>
                            </div>
                            <div class="form-group">
                                <label for="confirmNewPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="confirmNewPassword" required autocomplete="new-password" aria-describedby="confirmNewPasswordError">
                                <div id="confirmNewPasswordError" class="error-message hidden"></div>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="cta-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                            </div>
                        </form>
                    </article>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="full-width-footer">
            <div class="container">
                <p>¬© 2025 SkillSearch. –û–±–º–µ–Ω –Ω–∞–≤—ã–∫–∞–º–∏.</p>
            </div>
        </div>
    </footer>

    <script>
        window.SQL = { locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}` };
    </script>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ sql.js —á–µ—Ä–µ–∑ CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ script.js —Å –º–æ–¥—É–ª—è–º–∏ -->
    <script type="module" src="script.js"></script>
    <script>
        document.getElementById('changePasswordForm')?.addEventListener('submit', function (e) {
            e.preventDefault();
            changePassword();
        });

        function changePassword() {
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmNewPassword').value;

            // –°–±—Ä–æ—Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ—à–∏–±–æ–∫
            document.querySelectorAll('.error-message').forEach(el => el.classList.add('hidden'));

            if (!currentPassword || !newPassword || !confirmPassword) {
                showMessage('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }

            if (newPassword !== confirmPassword) {
                showMessage('–ù–æ–≤—ã–µ –ø–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç', 'error', 'confirmNewPasswordError');
                return;
            }

            if (newPassword.length < 6) {
                showMessage('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤', 'error', 'newPasswordError');
                return;
            }

            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
            showMessage('–ü–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω!', 'success');
            document.getElementById('changePasswordForm').reset();
        }

        function showMessage(message, type = 'info', elementId = null) {
            if (elementId) {
                const element = document.getElementById(elementId);
                if (element) {
                    element.textContent = message;
                    element.className = `message ${type}`;
                    element.classList.remove('hidden');
                    return;
                }
            }
            alert(message);
        }
    </script>
</body>
</html>